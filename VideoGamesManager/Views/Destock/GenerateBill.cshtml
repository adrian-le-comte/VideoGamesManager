@using VideoGamesManager.Dbo
@model VideoGamesManager.Models.DestockViewModel

@{
    ViewData["Title"] = "Liste des jeux vidéo";
}

<style>
    .container {
        display: flex;
        flex-direction: column;
        gap: 20px;
    }

    .box {
        display: flex;
        gap: 20px;
    }

        .box .form-group {
            flex: 1;
        }
</style>

<script>
    function selectGame(id, name, price) {
        document.getElementById("SelectedGameId").value = id;
        document.getElementById("Name").value = name;
        document.getElementById("Price").value = price;
        alert("send");
    }

    function deleteGame(gameId) {
    }
</script>

<div class="container">
    <h2>Liste des jeux vidéo</h2>

    <div class="box">
        <h3>Jeu à ajouter :</h3>

        <form asp-controller="Destock" asp-action="AddGame" method="post">
            <div class="form-group">
                <label>Nom du jeu :</label>
                <input type="text" class="form-control" name="Name" id="Name" readonly/>
            </div>
            <div class="form-group">
                <label>Prix :</label>
                <input type="text" class="form-control" name="Price" id="Price" readonly/>
            </div>
            <div class="form-group">
                <label>Quantité demandée :</label>
                <input type="text" class="form-control" name="Stock" id="Stock" />
            </div>
            <input type="hidden" name="gameId" id="SelectedGameId" />


            <button type="submit" class="btn btn-primary">Ajouter</button>
        </form>
    </div>

    <h3>Jeux sélectionnés :</h3>
    <table class="table">
        <thead>
            <tr>
                <th>Nom du jeu</th>
                <th>Prix</th>
                <th>Quantité demandée</th>
                <th>Action</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var selectedGame in Model.SelectedGames)
            {
                <tr>
                    <td>@selectedGame.Name</td>
                    <td>@selectedGame.Price</td>
                    <td>@selectedGame.Stock</td>
                    <td></td>
                    <td><button onclick="deleteGame('@selectedGame.Id')">Delete</button></td>
                </tr>
            }
        </tbody>
    </table>

    <h2>Liste des jeux vidéo</h2>

    <table class="table">
        @foreach (var game in Model.Games)
        {
            <tr>
                <td>@game.Name</td>
                <td>@game.Price</td>
                <td>@game.Stock</td>
                <td><button onclick="selectGame('@game.Id', '@game.Name', '@game.Price')">Select</button></td>
            </tr>
        }
    </table>
</div>
